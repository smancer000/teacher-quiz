"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[8969],{45577:(e,t,i)=>{i.d(t,{q:()=>a});var l=i(45992),o=i(17588),n=i(66264),d=i(60708),r=i(70698),s=i(5441);const a=(0,o.forwardRef)(((e,t)=>{let{getItems:i,item:a,menuType:u,theme:c,shouldCloseWhenClickOutside:m=!1,menuTheme:g,styles:h,slideSize:v,getItemLayout:f}=e;const[C,p]=(0,o.useState)(i()),[T,y]=(0,o.useState)(!1),S=function(e){const t=(0,o.useRef)(null);return(0,o.useEffect)((()=>{e&&("function"===typeof e?e(t.current):e.current=t.current)})),t}(t),b=(0,o.useCallback)((()=>{y((e=>!e))}),[]);(0,o.useEffect)((()=>{const e=null===a||void 0===a?void 0:a.on(n.q.Message,(e=>{e===d.m.Entering&&(p(i()),y(!1))}));return()=>{null===e||void 0===e||e()}}),[i,a]),function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,o.useEffect)((()=>{const l=i=>{(null===t||void 0===t?void 0:t.current)&&!t.current.contains(i.target)&&e(i)};return document.addEventListener("mouseup",l,i),document.addEventListener("touchend",l,i),()=>{document.removeEventListener("mouseup",l,i),document.removeEventListener("touchend",l,i)}}),[t,e,i])}((0,o.useCallback)((()=>{m&&T&&y(!1)}),[T,m]),S,!0),(0,o.useEffect)((()=>{p(i())}),[i]);const x=(0,r.CO)(u);return(0,s.T)({theme:c,children:(0,l.jsx)(x,{items:C,onToggleClick:b,opened:T,ref:S,theme:c,menuTheme:g,styles:h,slideSize:v,getItemLayout:f})})}))},15690:(e,t,i)=>{i.d(t,{M:()=>f});var l=i(45992),o=i(17588),n=i(89035),d=i(21646);const r=()=>{},s=(0,o.forwardRef)(((e,t)=>{let{styles:i}=e;const o=r;return(0,l.jsx)(d.W1,{ref:t,style:{width:"100%",height:"100%"},$backgroundColor:i.backgroundColor,$hamburgerIconColor:i.hamburgerIconColor,children:(0,l.jsxs)(d.YT,{"data-nav-element":"hamburger-menu-toggle",$width:n.sf,children:[(0,l.jsx)(d.e3,{}),(0,l.jsx)(d.cl,{onClick:o,role:"button",children:(0,l.jsx)(d.h_,{children:(0,l.jsx)(d.RG,{$color:i.hamburgerIconColor})})})]})})}));var a=i(58424),u=i(73242);const c=Math.random().toString(36).substring(7),m=()=>{},g=(0,o.forwardRef)(((e,t)=>{let{items:i,menuTheme:o,styles:n}=e;const d=`mainMenu-${c}`,r=m,{ref:s,hasHorizontalScroll:g}=(0,a.x)();return(0,l.jsxs)(u.W1,{"aria-labelledby":d,role:"menu",ref:t,$menuTheme:o,style:{width:"100%",height:"100%"},$backgroundColor:n.backgroundColor,children:[g&&(0,l.jsx)(u.hh,{onClick:r,$menuTheme:o,$disabled:!0,children:(0,l.jsx)(u.rZ,{})}),(0,l.jsx)(u.JU,{id:d,children:"Main menu"}),(0,l.jsx)(u.e3,{}),(0,l.jsx)(u.QS,{ref:s,children:i.map((e=>(0,l.jsx)(u.d,{$isLink:e.isLink,$isActive:e.isActive,$isAllowed:e.isAllowed,$backgroundColor:e.backgroundColor,$textColor:e.textColor,children:(0,l.jsx)(u.Dr,{tabIndex:-1,"aria-label":e.altText||void 0,"aria-disabled":!e.altText,children:(0,l.jsx)(u.gi,{children:e.text})})},e.text+e.key)))}),g&&(0,l.jsx)(u.hh,{onClick:r,$menuTheme:o,children:(0,l.jsx)(u.wF,{})})]})}));var h=i(54769);var v=i(5441);const f=e=>{let{getItems:t,menuType:i,theme:o,styles:n,menuTheme:d}=e;const r=t(),a=(e=>{switch(e){case h.L.Horizontal:return g;case h.L.Hamburger:return s;default:return g}})(i);return(0,v.T)({theme:o,children:(0,l.jsx)(a,{items:r,menuTheme:d,styles:n})})}},76390:(e,t,i)=>{i.d(t,{F:()=>o,c:()=>n});var l=i(15938);const o=e=>e===l.N.Dark?{textColor:"rgb(255, 255, 255)",itemBackgroundColor:"rgb(208, 208, 208)"}:{textColor:"rgb(0, 0, 0)",itemBackgroundColor:"rgb(154, 154, 154)"},n=e=>e===l.N.Dark?{menuBackgroundColor:"rgb(0, 0, 0)",hamburgerIconColor:"rgb(255, 255, 255)"}:{menuBackgroundColor:"rgb(255, 255, 255)",hamburgerIconColor:"rgb(0, 0, 0)"}},68969:(e,t,i)=>{i.r(t),i.d(t,{geniallyMenuEditorScript:()=>p});var l=i(45992),o=i(17588),n=i(57277),d=i(55399),r=i(42511),s=i(45577),a=i(15690),u=i(76390);var c,m=i(89035),g=i(54769);!function(e){e[e.MD=380]="MD"}(c||(c={}));const h=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var l;if(!e||!e.exists)return;const o=e,{menuType:n}=t;if(i){if(n===g.L.Horizontal){const e=(e=>{switch(e){case g.L.Horizontal:return{minWidth:c.MD,maxWidth:void 0};case g.L.Hamburger:return{minWidth:m.N_.width,maxWidth:c.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(n),t=o.parentSlide.size.width-24,i=Math.max(null!==(l=e.minWidth)&&void 0!==l?l:0,t);o.setSize(i,m.cE.height),o.setPosition((o.parentSlide.size.width-i)/2,o.y)}n===g.L.Hamburger&&o.setSize(m.N_.width,m.N_.height)}};var v=i(93918),f=i(49754);const C=(0,d.V)((0,o.forwardRef)(((e,t)=>{let{editor:i,script:o,getItemLayout:n}=e;var d;const{theme:a,t:u}=i,{item:c}=o,{menuItems:m,menuTheme:g,menuType:h,backgroundColor:f,hamburgerIconColor:C}=o.getConfig(),p=null!==(d=null===c||void 0===c?void 0:c.parentSlide.size)&&void 0!==d?d:{width:0,height:0},{removeSelectedItem:T,setDefaultSelectedItem:y}=(0,r.C)();return o.on("configChange",(e=>{let{config:t,prevConfig:i}=e;!i||t.menuType===i.menuType&&t.menuTheme===i.menuTheme||(T(),requestAnimationFrame(y))})),(0,l.jsx)(s.q,{ref:t,getItems:()=>(0,v.N)(m,i,u,!0),menuType:h,theme:a,menuTheme:g,styles:{backgroundColor:f,hamburgerIconColor:C},slideSize:p,getItemLayout:n})}))),p=e=>{let{script:t,editor:i}=e;i.justCreatedFromSidebar&&(e=>{let{editor:t,script:i}=e;0===i.getConfig().slidesToDisplay.selectedSlides.length&&i.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=t.getSlides().map((e=>e.id))}))})({editor:i,script:t}),i.on("slideCreated",(e=>{let{slide:i}=e;((e,t)=>{if(!1===e.getConfig().slidesToDisplay.allSlidesSelected){const i=e.item;i.excludedSlidesIds=[...i.excludedSlidesIds,t.id]}})(t,i)})),i.on("slideDeleted",(e=>{let{slide:l}=e;((e,t)=>{1===e.getSlides().length&&t.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(i,t),((e,t)=>{const{allSlidesSelected:i,selectedSlides:l}=e.getConfig().slidesToDisplay;if(!i)if(null===l||void 0===l?void 0:l.includes(t.id))e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=e.slidesToDisplay.selectedSlides.filter((e=>e!==t.id))}));else{const i=e.item;i.excludedSlidesIds=i.excludedSlidesIds.filter((e=>e!==t.id))}})(t,l)})),t.on("configChange",(e=>{let{config:l,prevConfig:o}=e;const n=t.item;n&&((e=>{let{item:t}=e;if(!t||!t.exists)return;const i=t;t.thumbnail&&(i.thumbnail=void 0)})({item:n}),o&&l.menuType!==o.menuType&&h(n,l,!0),o&&((e,t)=>{return e.slidesToDisplay.allSlidesSelected!==(null===t||void 0===t?void 0:t.slidesToDisplay.allSlidesSelected)||(i=e.slidesToDisplay.selectedSlides,l=null===t||void 0===t?void 0:t.slidesToDisplay.selectedSlides,i.length!==l.length||!i.every(((e,t)=>e===l[t])));var i,l})(l,o)&&((e,t,i,l)=>{e.item&&e.item.exists&&(function(e,t,i){const l=i.slidesToDisplay.selectedSlides.filter((e=>t.getSlides().find((t=>t.id===e))));l.length!==i.slidesToDisplay.selectedSlides.length&&e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=l}))}(e,t,i),function(e,t,i,l){const{item:o}=e,n=o;(i.slidesToDisplay.allSlidesSelected!==(null===l||void 0===l?void 0:l.slidesToDisplay.allSlidesSelected)||i.slidesToDisplay.selectedSlides!==(null===l||void 0===l?void 0:l.slidesToDisplay.selectedSlides))&&(n.excludedSlidesIds=function(e,t){if(e.slidesToDisplay.allSlidesSelected)return[];const i=t.getSlides(),l=e.slidesToDisplay.selectedSlides||[];return i.filter((e=>!l.includes(e.id))).map((e=>e.id))}(i,t),e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected&&(e.slidesToDisplay.selectedSlides=[])})))}(e,t,i,l))})(t,i,l,o),((e,t)=>{const i=e.item;i&&0===i.excludedSlidesIds.length&&!1===t.slidesToDisplay.allSlidesSelected&&e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(t,l),o&&l.menuTheme!==o.menuTheme&&((e,t,i)=>{const l=(0,u.c)(e.menuTheme),o=(0,u.F)(e.menuTheme);i.mutateConfig((e=>{e.backgroundColor===t.backgroundColor&&(e.backgroundColor=l.menuBackgroundColor),e.hamburgerIconColor===t.hamburgerIconColor&&(e.hamburgerIconColor=l.hamburgerIconColor),e.menuItems=e.menuItems.map(((e,i)=>{var l,n,d,r;return e.backgroundColor===(null===(n=null===(l=t.menuItems)||void 0===l?void 0:l[i])||void 0===n?void 0:n.backgroundColor)&&(e.backgroundColor=o.itemBackgroundColor),e.textColor===(null===(r=null===(d=t.menuItems)||void 0===d?void 0:d[i])||void 0===r?void 0:r.textColor)&&(e.textColor=o.textColor),e}))}))})(l,o,t),n.showOverflow||(n.showOverflow=!0),n.isTransversal||(n.isTransversal=!0))}));const o=()=>{var e,i,l,o,n,d,r,s;return{width:null!==(i=null===(e=t.item)||void 0===e?void 0:e.width)&&void 0!==i?i:0,height:null!==(o=null===(l=t.item)||void 0===l?void 0:l.height)&&void 0!==o?o:0,left:null!==(d=null===(n=t.item)||void 0===n?void 0:n.x)&&void 0!==d?d:0,top:null!==(s=null===(r=t.item)||void 0===r?void 0:r.y)&&void 0!==s?s:0}};(0,n.x)({getTargetNodeItem:()=>t.item,renderApp:()=>(0,l.jsx)(C,{editor:i,script:t,isSelectableItem:f.M2,selectableItems:f.Xg,getItemLayout:o}),renderThumbnailApp:()=>{const{theme:e,t:o}=i,{menuItems:n,menuTheme:d,menuType:r,backgroundColor:s,hamburgerIconColor:u}=t.getConfig();return(0,l.jsx)(a.M,{getItems:()=>(0,v.N)(n,i,o,!0),menuType:r,theme:e,menuTheme:d,styles:{backgroundColor:s,hamburgerIconColor:u}})},nodePrefix:"menu"})({script:t,editor:i})}},93918:(e,t,i)=>{i.d(t,{N:()=>r,e:()=>a});var l=i(53607),o=i(48237);const n=(e,t,i)=>""===e?t(i?"__new.editor.widget.menu.sidebar.emptyTitlePlaceholder":"__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,d=(e,t)=>{var i,o,n,d;const r=e.menuItemAction.action;if(!r)return!1;const s=(0,l.n5)(r.type),a=null===(i=s.getSlideIdsFromSnapshot)||void 0===i?void 0:i.call(s,r),u=null===(o=t.getCurrentSlide())||void 0===o?void 0:o.id;if(a&&a.length>0)return u===a[0];const c=t.getSlides(),m=c.findIndex((e=>e.id===u));return"smartLink"in r.target&&"firstPage"===(null===(n=r.target)||void 0===n?void 0:n.smartLink)?0===m:"smartLink"in r.target&&"lastPage"===(null===(d=r.target)||void 0===d?void 0:d.smartLink)&&m===c.length-1},r=(e,t,i,l)=>e.map(((e,r)=>{var s;const a=(null===(s=e.menuItemAction.action)||void 0===s?void 0:s.type)===o.L.GoToSlide;return{text:n(e.menuItemName,i,l),key:r,onClick:()=>{},isLink:a,isActive:d(e,t),isAllowed:a,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}})),s={active:!1,allowed:!1},a=(e,t,i)=>e.map(((e,l)=>{var d,r;const a=!!(null===(d=e.menuItemAction)||void 0===d?void 0:d.data)&&(null===(u=e.menuItemAction.data)||void 0===u?void 0:u.type)===o.L.GoToSlide;var u;const{active:c,allowed:m}=a&&(null===(r=e.menuItemAction)||void 0===r?void 0:r.data)?t.getGoToSlideState(e.menuItemAction.data):s;return{text:n(e.menuItemName,t.t,i),key:l,onClick:()=>{var t;return null===(t=e.menuItemAction)||void 0===t?void 0:t.run()},isLink:a,isActive:c,isAllowed:m,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}}))},57277:(e,t,i)=>{i.d(t,{x:()=>o});var l=i(70377);function o(e){let{getTargetNodeItem:t,renderApp:i,renderThumbnailApp:o,nodePrefix:n}=e;return e=>{let{script:d,editor:r}=e,s=null,a=[];function u(e){s&&(l.unmountComponentAtNode(s),s=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function c(){s&&l.render(i(),s)}function m(){const e=t(d.getConfig());if(!e)return;const i=`${n}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${i}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{s="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(i)||null,c()}))}function g(){o&&a.length&&a.forEach((e=>{l.render(o(),e)}))}function h(){const e=t(d.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const t=document.getElementsByClassName(e.idOfThumbnailFreeNode);a=Array.from(t),g()}))}d.on("configChange",(e=>{let{config:i,prevConfig:l}=e;const o=t(i),n=l?t(l):void 0;n&&n!==o&&u(n),o&&(o!==n?(m(),h()):(c(),g()))})),d.on("dispose",(()=>{u(t(d.getConfig()))})),r.on("itemMount",(e=>{let{item:t}=e;t===d.item&&m()})),r.on("slideChange",(()=>{c()})),r.on("itemUnmount",(e=>{let{item:t}=e;t===d.item&&u()})),r.on("itemThumbnailMount",(e=>{let{item:t}=e;t===d.item&&h()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/8969.6a530a09.chunk.js.map